{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Axios –¥–ª—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤\nimport axios from 'axios';\n\n// –ë–∞–∑–æ–≤–∏–π URL Pixabay API\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// –û—Ç—Ä–∏–º–∞–Ω–Ω—è API-–∫–ª—é—á–∞ –∑ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (.env)\nfunction getApiKey() {\n  return import.meta.env.VITE_PIXABAY_API_KEY || '';\n}\n\n// –í–∏–∫–æ–Ω–∞–Ω–Ω—è HTTP-–∑–∞–ø–∏—Ç—É –∑–∞ –ø–æ—à—É–∫–æ–≤–∏–º —Å–ª–æ–≤–æ–º; –ø–æ–≤–µ—Ä—Ç–∞—î data –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ\nexport function getImagesByQuery(query) {\n  const key = getApiKey();\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∫–ª—é—á–∞ ‚Äî —è–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π, –≤—ñ–¥—Ö–∏–ª—è—î–º–æ Promise\n  if (!key || !String(key).trim()) {\n    return Promise.reject(new Error('MISSING_API_KEY'));\n  }\n\n  // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É –∑–≥—ñ–¥–Ω–æ –∑ –¢–ó (key, q, image_type, orientation, safesearch)\n  const params = {\n    key: key.trim(),\n    q: String(query).trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  };\n\n  return axios.get(BASE_URL, { params }).then((response) => response.data);\n}\n","// –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è SimpleLightbox —Ç–∞ –π–æ–≥–æ —Å—Ç–∏–ª—ñ–≤\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–∞–ª–µ—Ä–µ—ó —Ç–∞ –µ–ª–µ–º–µ–Ω—Ç –ª–æ–∞–¥–µ—Ä–∞\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader-wrap');\n\n// –ï–∫–∑–µ–º–ø–ª—è—Ä SimpleLightbox (–ª—ñ–Ω–∏–≤–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É createGallery)\nlet lightboxInstance = null;\n\n// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è HTML-—Ä–æ–∑–º—ñ—Ç–∫–∏ –æ–¥–Ω—ñ—î—ó –∫–∞—Ä—Ç–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è\nfunction createCardMarkup(img) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags = '',\n    likes = 0,\n    views = 0,\n    comments = 0,\n    downloads = 0,\n  } = img;\n\n  // –ï–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ñ–≤ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ alt/title\n  const raw = String(tags).slice(0, 200);\n  const safe = raw\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n\n  return `\n<li class=\"gallery-item\">\n  <a class=\"gallery-item__link\" href=\"${largeImageURL}\" title=\"${safe}\">\n    <img\n      class=\"gallery-item__img\"\n      src=\"${webformatURL}\"\n      alt=\"${safe}\"\n      loading=\"lazy\"\n      width=\"640\"\n      height=\"360\"\n    />\n    <div class=\"gallery-item__info\">\n      <span class=\"gallery-item__info-item\">‚ù§Ô∏è ${likes}</span>\n      <span class=\"gallery-item__info-item\">üëÅ ${views}</span>\n      <span class=\"gallery-item__info-item\">üí¨ ${comments}</span>\n      <span class=\"gallery-item__info-item\">‚¨á ${downloads}</span>\n    </div>\n  </a>\n</li>`;\n}\n\n// –î–æ–¥–∞—î —Ä–æ–∑–º—ñ—Ç–∫—É –≥–∞–ª–µ—Ä–µ—ó –≤ DOM —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î refresh() –Ω–∞ SimpleLightbox\nexport function createGallery(images) {\n  if (!galleryEl) return;\n\n  // –ü–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤ –∞–±–æ –Ω–µ –º–∞—Å–∏–≤ ‚Äî –æ—á–∏—â–∞—î–º–æ –≥–∞–ª–µ—Ä–µ—é\n  if (!Array.isArray(images) || images.length === 0) {\n    galleryEl.innerHTML = '';\n    return;\n  }\n\n  // –ì–µ–Ω–µ—Ä—É—î–º–æ —Ä–æ–∑–º—ñ—Ç–∫—É –≤—Å—ñ—Ö –∫–∞—Ä—Ç–æ–∫ –æ–¥–Ω–∏–º —Ä—è–¥–∫–æ–º\n  const markup = images.map(createCardMarkup).join('');\n  galleryEl.innerHTML = markup;\n\n  // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–∞–π—Ç–±–æ–∫—Å–∞ –∞–±–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a', {\n      captionsData: 'title',\n      captionDelay: 250,\n    });\n  } else {\n    lightboxInstance.refresh();\n  }\n}\n\n// –û—á–∏—â–µ–Ω–Ω—è –≤–º—ñ—Å—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≥–∞–ª–µ—Ä–µ—ó\nexport function clearGallery() {\n  if (galleryEl) galleryEl.innerHTML = '';\n}\n\n// –ü–æ–∫–∞–∑ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–ø—Ä–∏–±–∏—Ä–∞—î –∫–ª–∞—Å is-hidden)\nexport function showLoader() {\n  if (loaderEl) loaderEl.classList.remove('is-hidden');\n}\n\n// –ü—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–¥–æ–¥–∞—î –∫–ª–∞—Å is-hidden)\nexport function hideLoader() {\n  if (loaderEl) loaderEl.classList.add('is-hidden');\n}\n","// –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è iziToast –¥–ª—è –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π —Ç–∞ –π–æ–≥–æ —Å—Ç–∏–ª—ñ–≤\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// –Ü–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü—ñ–π –¥–ª—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ —Ä–µ–Ω–¥–µ—Ä—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\n\n// –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–æ—Ä–º—É –ø–æ—à—É–∫—É\nconst formEl = document.querySelector('.form');\n\n// –û–±—Ä–æ–±–Ω–∏–∫ —Å–∞–±–º—ñ—Ç—É —Ñ–æ—Ä–º–∏ ‚Äî –∑–∞–ø–∏—Ç –¥–æ Pixabay, –≤—ñ–¥–º–∞–ª—å–æ–≤—É–≤–∞–Ω–Ω—è –≥–∞–ª–µ—Ä–µ—ó –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è\nfunction handleSearchSubmit(event) {\n  event.preventDefault();\n\n  const input = formEl.querySelector('input[name=\"search-text\"]');\n  const query = input ? input.value.trim() : '';\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø–æ—Ä–æ–∂–Ω—ñ–π –ø–æ—à—É–∫–æ–≤–∏–π —Ä—è–¥–æ–∫\n  if (!query) {\n    return;\n  }\n\n  // –ü–æ–∫–∞–∑—É—î–º–æ –ª–æ–∞–¥–µ—Ä —Ç–∞ –æ—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏\n  showLoader();\n  clearGallery();\n\n  // –í–∏–∫–æ–Ω—É—î–º–æ HTTP-–∑–∞–ø–∏—Ç –∑–∞ –∫–ª—é—á–æ–≤–∏–º —Å–ª–æ–≤–æ–º\n  getImagesByQuery(query)\n    .then((data) => {\n      hideLoader();\n\n      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö –∞–±–æ –ø–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤ hits\n      if (!data || !Array.isArray(data.hits)) {\n        iziToast.info({\n          title: 'Info',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          timeout: 4000,\n        });\n        return;\n      }\n\n      if (data.hits.length === 0) {\n        iziToast.info({\n          title: 'Info',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          timeout: 4000,\n        });\n        return;\n      }\n\n      // –í—ñ–¥–º–∞–ª—å–æ–≤—É—î–º–æ –≥–∞–ª–µ—Ä–µ—é –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å\n      createGallery(data.hits);\n    })\n    .catch((err) => {\n      hideLoader();\n\n      // –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ç–µ–∫—Å—Ç –ø–æ–º–∏–ª–∫–∏ –∑–∞ —Ç–∏–ø–æ–º (–≤—ñ–¥—Å—É—Ç–Ω—ñ–π –∫–ª—é—á, 429, 400 —Ç–æ—â–æ)\n      let msg = 'Something went wrong. Please try again.';\n      if (err.message === 'MISSING_API_KEY') {\n        msg =\n          'Pixabay API key is missing. Create .env and add VITE_PIXABAY_API_KEY=your_key (get key: https://pixabay.com/api/docs/)';\n      } else if (err.response?.status === 429) {\n        msg = 'Too many requests. Please try again later.';\n      } else if (err.response?.status === 400) {\n        msg =\n          'Invalid request (e.g. missing API key). Check .env and VITE_PIXABAY_API_KEY.';\n      } else if (err.message) {\n        msg = err.message;\n      }\n\n      iziToast.error({\n        title: 'Error',\n        message: msg,\n        position: 'topRight',\n        timeout: 6000,\n      });\n    });\n}\n\n// –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫–∞ —Å–∞–±–º—ñ—Ç—É —Ñ–æ—Ä–º–∏\nif (formEl) {\n  formEl.addEventListener('submit', handleSearchSubmit);\n}\n"],"names":["BASE_URL","getApiKey","getImagesByQuery","query","key","params","axios","response","galleryEl","loaderEl","lightboxInstance","createCardMarkup","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","safe","createGallery","images","markup","SimpleLightbox","clearGallery","showLoader","hideLoader","formEl","handleSearchSubmit","event","input","data","iziToast","err","msg"],"mappings":"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"}